---
layout: post_study
title:  스마트 컨트랙트(Smart Contarct) 개발환경 구축
date: 2020-06-24 01:01:01
categories: blockchain
---
## 스마트 컨트랙트(Smart Contarct) 개발환경 구축
<br/><br/>
블록체인은 중앙 집중화된 서버의 형식으로 동작하지 않고 각각의 노드들이 분산 되어 서로간의 연결(Peer to peer)로 이루져 있다. 이렇게 서로 노드간의 통신을 할 수 있는 표준을 준수하는 프로그램들을 "이더리움 클라이언트 프로그램"이라고 정의한다. 이더리움 클라이언트는 다양한 언어로 개발할 수 있으며 그중 많이 사용하는 것이 구글에서 개발하는 "GO" 언어로 개발된 "Go Ethereum"이다.
<br/><br/>
실제 이더리움 클라이언트 프로그램은 이더리움의 메인 네트워크에 접속하고 하나의 노드로 동작하도록 구성되어 있다. 만약 이러한 클라이언트를 이용하여 스마트 컨트랙트를 작성하고 배포한다면 우리는 채굴자에게 실제 비용(가스비라고 한다)을 이더로 지불해야 한다.
<br/><br/>
프로그램을 개발해 본 독자라면 누구나 동의하겠지만 프로그램이 한번에 완벽하게 끝나는 경우는 없을 것이다. 항상 개발하고 테스트 하고 오류를 수정하는 과정을 거쳐야 하는데, 이 때마다 비용을 지불하면서 개발을 하기에는 너무 큰 어려움이 있다. 이러한 점을 해결해 주기 위하여 이더리움 클라이언트는 메인 네트워크에 접속하지 않고 개인 네트워크를 직접 설정하여 구성할 수 있는 방법을 제공해 준다.
<br/><br/>
일반적으로 스마트 컨트랙트를 개발하고 배포하는 과정은 "Test RPC(사설 네트워크)"에서 개발 및 디버깅을 한 후 이더리움 메인 네트워크와 동일한 구조를 가진 "TestNet"에서 테스트를 하고 완료되면 메인 네트워크(Ethereum Main Network)에 배포한다.
<br/><br/>

### 1. Go Ethereum
<br/>
이더리움 네트워크의 구조를 알아보기 위해서는 사용에는 조금 불편하지만 "Go Ethereum(이하 Geth)를 이용하는 방법에 대해 알아보는 것이 필요하다. "Geth"는 "HTTP JSON RPC", "web3.js" 및 "Solidity" 인터페이스를 제공해 주며, 이를 이용하여 스마트 컨트랙트를 작성하거나 계정간의 데이터를 전송할 수 있다. 실제 책에서 본 과정을 진행하면서 우리는 가나슈(Ganache)라는 테스트 네트워크를 이용할 것이지만 기본적인 개념을 위하여 먼저 "Geth"를 설치해 보도록 하자.
<br/><br/>
먼저 "Geth"의 공식 사이트인 https://geth.ethereum.org/downloads/ 에 접속하여 독자의 운영체제에 맞는 프로그램을 다운로드 받는다.
<br/><br/>

![](/asset/study/blockchain/2/1.png)
[그림 1] Go Ethereum 다운로드 페이지 (https://geth.ethereum.org/downloads)
{: .borderBox}

<br/>
2020년 6월 현재 "Geth"는 v1.9.15까지 배포되었다. 본 책에서는 윈도우즈를 기반으로 설명할 예정이므로 "Geth 1.9.15 for Windows"를 클릭하여 다운로드 받은 후 설치 파일을 실행한다. 설치 파일을 실행하면 다음과 같이 라이센스 부분에 대한 동의를 요구하는 대화상자가 나타난다.
<br/><br/>

![](/asset/study/blockchain/2/2.png)
[그림 2] 라이센스 동의
{: .borderBox}

<br/>
[I Agree]를 클릭하여 다음으로 이동하면 설치할 항목을 지정할 수 있는 대화상자가 나타난다.
<br/><br/>

![](/asset/study/blockchain/2/3.png)
[그림 3] 설치 파일의 선택
{: .borderBox}

<br/>
노드를 형성하고 블록 체인에 접속하기 위한 "Geth" 이더리움 클라이언트와 콘솔 모드에서 개발을 도와줄 수 있는 "Development tools"를 선택한 후 [Next] 버튼을 누른다.
<br/><br/>

![](/asset/study/blockchain/2/4.png)
[그림 4] 설치 경로의 지정
{: .borderBox}

<br/>
"Geth"가 설치될 디렉터리를 지정한 후 [Install]을 클릭하면 설치가 진행된다.
<br/><br/>

![](/asset/study/blockchain/2/5.png)
[그림 5] 설치의 진행
{: .borderBox}

<br/>
설치 과정중에 [그림 6]과 같이 환경 변수 설정에 대한 정보가 나타난다.
<br/><br/>

![](/asset/study/blockchain/2/6.png)
[그림 6] PATH 설정
{: .borderBox}

<br/>
"Geth"는 설치되면서 윈도우 환경변수에 실행 파일에 대한 경로를 지정하도록 되어 있는데, 정상적으로 경로가 업데이트 되는 경우에도 가끔 "PATH not updated, ..."이라는 메시지가 나타난다. 설치가 완료된 후 정상적으로 "Geth" 가 실행되지 않는 경우에는 시스템 환경변수를 설정해 주어야 한다. 설치가 완료되면 [Close] 버튼이 활성화 된다. [Close] 버튼을 눌러 프로그램의 설치를 마친다.
<br/><br/>
정상적으로 설치되었는지 확인하기 위하여 명령 프롬프트를 관리자 모드로 실행한 후 프롬프트 상에 다음과 같이 "Geth" 실행 명령을 입력한 후 엔터키를 입력하여 구동시킨다.

'''
c:\Users\MarkLee\geth
'''

<br/>
정상적으로 "Geth"가 실행되면 [그림 7]과 같이 환경 설정 정보들이 나타나면서 구동을 시작한다.
<br/><br/>

![](/asset/study/blockchain/2/7.png)
[그림 7] "Geth"의 실행
{: .borderBox}

<br/>
앞에서 "Go Ethereum"은 이더리움 클라이언트로 메인 네트워크에 접속하여 노드를 형성한다고 하였다. "Geth"를 기동하면 실제 이더리움 네트워크에 접속하여 블록들을 다운로드 받기 시작한다. 실제 모든 블록의 정보를 다운로드 받으려면 네트워크 상황에 따라 다르지만 하루 정도의 시간이 소요되고 저장되는 데이터도 상당하다.
<br/><br/>
우리는 이더리움 메인 네트워크의 노드로 'Geth"를 사용하는 것이 아니라 사설(private) 이더리움 네트워크를 설치하고 스마트 컨트랙트를 개발하는 것이 목적이므로 프로그램을 종료 시킨 후 (Ctrl + C 키 이용) 사설 네트워크를 구동하도록 하겠다.

<br/>
> 시스템 환경 변수 설정
<br/>
윈도우 시스템은 실행 파일의 경로를 PATH에 기록하여 어떠한 디렉터리에서도 실행이 가능하도록 설정해 놓을 수 있다. [제어판] → [시스템 보안] → [시스템]으로 이동한 후 왼쪽의 [고급 시스템 설정]을 클릭한다.
>>![](/asset/study/blockchain/2/8.png)
[그림 8] 고급 시스템 설정
{: .borderBox}
>시스템 속성 설정창에서 [환경 변수] 부분을 클릭 한다.
>>![](/asset/study/blockchain/2/9.png)
[그림 9] 시스템 Path 선택
{: .borderBox}
>하단의 "시스템 변수(S)" 부분에서 "Path" 부분을 선택한 후 [편집] 버튼을 클릭한다.
>>![](/asset/study/blockchain/2/10.png)
[그림 10] 환경 변수 추가
{: .borderBox}
>환경 변수 부분에 설치한 "Geth" 의 경로가 나타나지 않는다면 [새로 만들기(N)]를 클릭하여 설치된 경로를 추가하여 주면 된다.|

<br/><br/>
